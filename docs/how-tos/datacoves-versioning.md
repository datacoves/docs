# Datacoves versioning

We use [semantic versioning](https://semver.org/) in all our images, and datacoves releases.

`MAJOR.MINOR.PATCH`

where `MAJOR.MINOR` are read from `.version.yaml` and used every time a new image is
pushed to docker repository and `PATCH` is autogenerated (timestamp).

## Our criteria

### When do we bump the `MAJOR` version?

When we make incompatible changes or we introduce compatible changes but deprecate features:

- Any python library upgrade (including dbt) that requires changes in the customer's analytics(dbt) git repo
- Airbyte, Airflow, DataHub, Superset upgrades that require reconfiguration
- Datacoves core changes that require human intervention
- Airbyte, Airflow, DataHub, Superset that do not require reconfiguration, but several features are being deprecated

### When should we bump the `MINOR` version?

- When we make compatible changes, such as new features or upgrade dependencies
- Patch version changes to dbt e.g. 1.8.3 to 1.8.5
- Compatible updates to dbt e.g. 1.7.x to 1.8.x
- Compatible update to Airbyte, Airflow, DataHub, Superset that do not require reconfiguration

### Everything else is a `PATCH`

- Bug fixes, performance enhancements

## Images tags

Images are pushed with the folling tags:

- MAJOR
- MAJOR.MINOR
- MAJOR.MINOR.PATCH
- MAJOR.MINOR.PATCH-\<commit sha\>
- latest

CI servers that eventually use datacoves images could reference any of them, depending on how specific they need to be.

## Releases

Releases follow the same versioning criteria, they are generated by running the `./cli.py generate_release` command, or by triggering the `Generate Release` GitHub workflow.
